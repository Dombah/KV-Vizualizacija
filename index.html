<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KV</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .countries {
            fill: #d8d8d8;
            stroke: #fff;
            stroke-width: 0.5px;
        }
        #map{
            width: 100%;
            height: 100%;
            position: relative;
            margin: 0;
        }
        .countries:hover {
            fill: #a1a1a1;
        }
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px;
            border-radius: 4px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }
    </style>
    <!-- D3.js and TopoJSON libraries -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
</head>
<body>
    <div class="container">
        <div id="map"></div>
    </div>

    <script>
    // Set dimensions
    const width = 500;
    const height = 400;
    
    const tooltip = d3.select("body")
        .append("div")
        .attr("class", "tooltip");


    const svg = d3.select("#map")
        .append("svg")
        .attr("width", width)
        .attr("height", height);
        
    const projection = d3.geoMercator()
        .center([10, 55]) // Centered on Europe
        .scale(300)
        .translate([width / 2.5, height / 2]);
        
    const path = d3.geoPath()
        .projection(projection);
        
    d3.json("europe.json").then(function(topology) {
        const geojson = topojson.feature(topology, topology.objects.europe); 
        
        // Draw the countries
        svg.selectAll("path") 
            .data(geojson.features)
            .enter()
            .append("path")
            .attr("class", "countries")
            .attr("d", path)
            .on("mouseover", function(event, d) {
                    const tooltipContent = `
                    <strong>${d.properties.NAME}</strong><br>
                    Capital: ${d.properties.CAPITAL || 'N/A'}<br>
                    Population: ${d.properties.POP_EST?.toLocaleString() || 'N/A'}<br>
                    Area: ${d.properties.AREA_KM2?.toLocaleString() || 'N/A'} kmÂ²
                `;
                tooltip.style("opacity", 1)
                    .html(tooltipContent)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 30) + "px");
            })
            .on("mouseout", function() {
                tooltip.style("opacity", 0);
            })
            .on("mousemove", function(event) {
                tooltip.style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 30) + "px");
            });
    });
</script>
</body>
</html>